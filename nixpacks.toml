[variables]
FORCE_REBUILD = '2025-07-15-nixpython'

[phases.setup]
nixPkgs = [
  '(python311.withPackages (ps: with ps; [pip setuptools wheel flask flask-cors gunicorn pillow numpy flask-sqlalchemy psycopg2 flask-login werkzeug requests]))'
]
aptPkgs = ['libgl1', 'libglib2.0-0']

[phases.build]
dependsOn = ['setup']
cmds = ['echo "Python environment ready with packages"']

[start]
cmd = 'gunicorn --bind 0.0.0.0:$PORT --workers 1 --timeout 120 app:app'
